-- Add partial indexes on (company_id) WHERE deleted_at IS NULL for 70 tables
-- that have both columns but are missing this performance-critical index.
-- These match the existing pattern (e.g., idx_jobs_active, idx_vendors_active)
-- used by the 37 tables that already have this index.

CREATE INDEX IF NOT EXISTS idx_assemblies_active ON assemblies (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_bid_comparisons_active ON bid_comparisons (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_bid_packages_active ON bid_packages (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_budget_lines_active ON budget_lines (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_builder_terminology_active ON builder_terminology (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_change_orders_active ON change_orders (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_client_approvals_active ON client_approvals (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_client_messages_active ON client_messages (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_client_payments_active ON client_payments (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_client_portal_invitations_active ON client_portal_invitations (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_contract_signers_active ON contract_signers (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_contracts_active ON contracts (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_custom_report_widgets_active ON custom_report_widgets (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_custom_reports_active ON custom_reports (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_dashboard_widgets_active ON dashboard_widgets (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_document_classifications_active ON document_classifications (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_document_extractions_active ON document_extractions (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_document_folders_active ON document_folders (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_employees_active ON employees (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_equipment_active ON equipment (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_equipment_assignments_active ON equipment_assignments (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_equipment_costs_active ON equipment_costs (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_equipment_inspections_active ON equipment_inspections (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_equipment_maintenance_active ON equipment_maintenance (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_estimates_active ON estimates (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_extraction_templates_active ON extraction_templates (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_labor_rates_active ON labor_rates (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_lead_activities_active ON lead_activities (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_leads_active ON leads (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_lien_waiver_templates_active ON lien_waiver_templates (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_maintenance_schedules_active ON maintenance_schedules (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_marketplace_reviews_active ON marketplace_reviews (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_master_items_active ON master_items (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_migration_jobs_active ON migration_jobs (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_mobile_devices_active ON mobile_devices (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_onboarding_sessions_active ON onboarding_sessions (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_permits_active ON permits (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_portfolio_projects_active ON portfolio_projects (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_punch_items_active ON punch_items (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_purchase_orders_active ON purchase_orders (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_quality_checklist_items_active ON quality_checklist_items (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_quality_checklists_active ON quality_checklists (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_report_dashboards_active ON report_dashboards (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_rfi_responses_active ON rfi_responses (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_rfis_active ON rfis (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_safety_incidents_active ON safety_incidents (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_safety_inspections_active ON safety_inspections (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_saved_filters_active ON saved_filters (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_schedule_predictions_active ON schedule_predictions (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_schedule_risk_scores_active ON schedule_risk_scores (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_schedule_scenarios_active ON schedule_scenarios (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_schedule_weather_events_active ON schedule_weather_events (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_selection_categories_active ON selection_categories (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_selection_options_active ON selection_options (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_selections_active ON selections (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_sync_mappings_active ON sync_mappings (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_ticket_messages_active ON ticket_messages (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_vendor_contacts_active ON vendor_contacts (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_vendor_insurance_active ON vendor_insurance (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_vendor_job_performance_active ON vendor_job_performance (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_vendor_messages_active ON vendor_messages (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_vendor_notes_active ON vendor_notes (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_vendor_portal_access_active ON vendor_portal_access (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_vendor_portal_invitations_active ON vendor_portal_invitations (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_vendor_portal_settings_active ON vendor_portal_settings (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_vendor_scores_active ON vendor_scores (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_vendor_submissions_active ON vendor_submissions (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_vendor_warranty_callbacks_active ON vendor_warranty_callbacks (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_warranties_active ON warranties (company_id) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_warranty_claims_active ON warranty_claims (company_id) WHERE deleted_at IS NULL;
